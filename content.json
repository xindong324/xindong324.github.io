{"pages":[{"title":"About Me","text":"Dong Xin (董鑫)Major: Aircraft DesignPh DBeihang UniversityEmail: xindong324@buaa.edu.cnWechat: xindong324","link":"/about/index.html"},{"title":"categories","text":"","link":"/categories/index.html"},{"title":"tags","text":"","link":"/tags/index.html"}],"posts":[{"title":"My Favorite Music","text":"","link":"/2020/02/28/2020-02-28/"},{"title":"Hello World","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","link":"/2020/02/14/hello-world/"},{"title":"Gazebo踩坑记录","text":"Gazebo 创建一个模型 Gazebo 获取模型的状态(位姿、速度等) 这个比较详细 订阅topic方法、订阅Service方法 Gazebo中获得任意model的groundtruth的pose rosbag数据记录及转换图片、视频 ArUco估计相机位姿, 另一篇 rosbag 存储话题到txt rostopic echo -b file_name.bag -p /topic_name &gt; Txt_name.txt ROS四元数、欧拉角互转 aruco_ros使用 ros c++ spinOnce 放在一进入while的第一行 ROS学习 &lt;十一&gt; Parameter的设置与查询 Sophus 中SE3初始化应用旋转矩阵而不是欧拉角否则会有问题，参见 结合SLAM十四讲的示例程序理解SE3, se(3), so(3),R, t等 ROS四元数、欧拉角互转 ROS学习笔记（三）：rosrun和runlaunch的用法, roslaunch 中使用param Tensorflow tf.layers.Dense与 tf.layers.dense的区别","link":"/2020/05/29/Gazebo%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"},{"title":"mavros踩坑记录","text":"gazebo仿真中添加距离传感器以px4源码中 iris_fpv_cam 为例，修改sdf文件，加入sf01a超声波传感器(未提供tfmini模型)，加入后变为 12345678910111213141516171819202122232425262728293031323334353637&lt;?xml version='1.0'?&gt;&lt;sdf version='1.5'&gt; &lt;model name='iris_fpv_cam'&gt; &lt;include&gt; &lt;uri&gt;model://iris&lt;/uri&gt; &lt;/include&gt; &lt;include&gt; &lt;uri&gt;model://fpv_cam&lt;/uri&gt; &lt;pose&gt;0 0 0 0 1.57 0&lt;/pose&gt; &lt;/include&gt; &lt;joint name=&quot;fpv_cam_joint&quot; type=&quot;fixed&quot;&gt; &lt;child&gt;fpv_cam::link&lt;/child&gt; &lt;parent&gt;iris::base_link&lt;/parent&gt; &lt;axis&gt; &lt;xyz&gt;0 0 1&lt;/xyz&gt; &lt;limit&gt; &lt;upper&gt;0&lt;/upper&gt; &lt;lower&gt;0&lt;/lower&gt; &lt;/limit&gt; &lt;/axis&gt; &lt;/joint&gt; &lt;!--lidar--&gt; &lt;include&gt; &lt;uri&gt;model://sf10a&lt;/uri&gt; &lt;pose&gt;0 0 -0.05 0 0 0&lt;/pose&gt; &lt;/include&gt; &lt;joint name=&quot;sf10a_joint&quot; type=&quot;fixed&quot;&gt; &lt;parent&gt;iris::base_link&lt;/parent&gt; &lt;child&gt;sf10a::link&lt;/child&gt; &lt;/joint&gt; &lt;/model&gt;&lt;/sdf&gt; mavros添加发布 tfmini 距离传感器数据有关px4连接tfmini并配置的部分请自行到 Px4 使用手册 查找相关说明，配置成功后打开QGroundControl， 找到Mavlink Inspector， 选择 DISTANCE_SENSOR可以看到发布的高度传感器的id和数据首先说明下MAVROS px4在启动时调用 roslaunch mavros px4.launch &lt;args&gt; ，打开($ find mavros)/mavros/launch/px4.launch 12345678910111213141516171819202122232425&lt;launch&gt; &lt;!-- vim: set ft=xml noet : --&gt; &lt;!-- example launch script for PX4 based FCU's --&gt; &lt;arg name=&quot;fcu_url&quot; default=&quot;/dev/ttyACM0:57600&quot; /&gt; &lt;arg name=&quot;gcs_url&quot; default=&quot;&quot; /&gt; &lt;arg name=&quot;tgt_system&quot; default=&quot;1&quot; /&gt; &lt;arg name=&quot;tgt_component&quot; default=&quot;1&quot; /&gt; &lt;arg name=&quot;log_output&quot; default=&quot;screen&quot; /&gt; &lt;arg name=&quot;fcu_protocol&quot; default=&quot;v2.0&quot; /&gt; &lt;arg name=&quot;respawn_mavros&quot; default=&quot;false&quot; /&gt; &lt;include file=&quot;$(find mavros)/launch/node.launch&quot;&gt; &lt;arg name=&quot;pluginlists_yaml&quot; value=&quot;$(find mavros)/launch/px4_pluginlists.yaml&quot; /&gt; &lt;arg name=&quot;config_yaml&quot; value=&quot;$(find mavros)/launch/px4_config.yaml&quot; /&gt; &lt;arg name=&quot;fcu_url&quot; value=&quot;$(arg fcu_url)&quot; /&gt; &lt;arg name=&quot;gcs_url&quot; value=&quot;$(arg gcs_url)&quot; /&gt; &lt;arg name=&quot;tgt_system&quot; value=&quot;$(arg tgt_system)&quot; /&gt; &lt;arg name=&quot;tgt_component&quot; value=&quot;$(arg tgt_component)&quot; /&gt; &lt;arg name=&quot;log_output&quot; value=&quot;$(arg log_output)&quot; /&gt; &lt;arg name=&quot;fcu_protocol&quot; value=&quot;$(arg fcu_protocol)&quot; /&gt; &lt;arg name=&quot;respawn_mavros&quot; default=&quot;$(arg respawn_mavros)&quot; /&gt; &lt;/include&gt;&lt;/launch&gt; 然后定位到 node.launch 1234567891011121314151617181920212223242526&lt;launch&gt; &lt;!-- vim: set ft=xml noet : --&gt; &lt;!-- base node launch file--&gt; &lt;arg name=&quot;fcu_url&quot; /&gt; &lt;arg name=&quot;gcs_url&quot; /&gt; &lt;arg name=&quot;tgt_system&quot; /&gt; &lt;arg name=&quot;tgt_component&quot; /&gt; &lt;arg name=&quot;pluginlists_yaml&quot; /&gt; &lt;arg name=&quot;config_yaml&quot; /&gt; &lt;arg name=&quot;log_output&quot; default=&quot;screen&quot; /&gt; &lt;arg name=&quot;fcu_protocol&quot; default=&quot;v2.0&quot; /&gt; &lt;arg name=&quot;respawn_mavros&quot; default=&quot;false&quot; /&gt; &lt;node pkg=&quot;mavros&quot; type=&quot;mavros_node&quot; name=&quot;mavros&quot; required=&quot;$(eval not respawn_mavros)&quot; clear_params=&quot;true&quot; output=&quot;$(arg log_output)&quot; respawn=&quot;$(arg respawn_mavros)&quot;&gt; &lt;param name=&quot;fcu_url&quot; value=&quot;$(arg fcu_url)&quot; /&gt; &lt;param name=&quot;gcs_url&quot; value=&quot;$(arg gcs_url)&quot; /&gt; &lt;param name=&quot;target_system_id&quot; value=&quot;$(arg tgt_system)&quot; /&gt; &lt;param name=&quot;target_component_id&quot; value=&quot;$(arg tgt_component)&quot; /&gt; &lt;param name=&quot;fcu_protocol&quot; value=&quot;$(arg fcu_protocol)&quot; /&gt; &lt;!-- load blacklist, config --&gt; &lt;rosparam command=&quot;load&quot; file=&quot;$(arg pluginlists_yaml)&quot; /&gt; &lt;rosparam command=&quot;load&quot; file=&quot;$(arg config_yaml)&quot; /&gt; &lt;/node&gt;&lt;/launch&gt; 可以看出node.launch是主节点，调用了配置文件 px4_config.yaml 和插件配置文件 px4_pluginlists.yaml。 px4_config文件主要是定义了发布和订阅的节点，有关distance sensor的部分如下: 可以看出config 文件中定义了有关distance sensor的部分，但是直接运行mavros的显示信息以及rostopic list的结果如下，可以看出是没有发布distance sensor相关的topic的： 原因是px4_pluginlists文件中定义了调用的插件的黑白名单，内容如下:因此可以看出distance sensor被添加到了黑名单中，将其注释掉: 再次运行mavros，rostopic list结果如下： 可以看到config中定义的distance sensor都被发布出来了，此时，由于我们只使用到了tfmini，从QGround中看出其id为0，因此对config文件做如下修改，只保留tfmini的topic：此时再次运行mavros，rostopic list结果为：同时我们对话题进行 echo： enjoy!","link":"/2020/06/26/mavros%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Music","slug":"Music","link":"/tags/Music/"},{"name":"Gazebo","slug":"Gazebo","link":"/tags/Gazebo/"},{"name":"UAV","slug":"UAV","link":"/tags/UAV/"}],"categories":[{"name":"Music","slug":"Music","link":"/categories/Music/"},{"name":"AI","slug":"AI","link":"/categories/AI/"}]}